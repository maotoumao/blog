@tailwind components;

@layer components {
  .article-layout {
    @apply relative;
  }

  .article-content {
    @apply w-full max-w-none;
  }

  .article-content.prose {
    max-width: none;
  }

  .article-content :where(p) {
    @apply leading-[1.9] text-warm-text/85 dark:text-night-text/85;
  }

  .article-content :where(h2, h3, h4) {
    @apply mt-14 mb-4 tracking-tight text-warm-text dark:text-night-text;
    scroll-margin-top: 7.5rem;
  }

  .article-content h1 {
    @apply mt-12 mb-5 text-3xl md:text-4xl leading-tight tracking-tight text-warm-text dark:text-night-text;
    @apply border-b border-warm-text/10 dark:border-night-text/15 pb-3;
  }

  .article-content h2 {
    @apply text-2xl md:text-3xl leading-tight;
    @apply border-l-4 border-warm-accent/40 pl-4;
  }

  .article-content h3 {
    @apply text-xl md:text-2xl leading-snug mt-9;
  }

  .article-content :where(ul, ol) {
    @apply my-6;
  }

  .article-content :where(li) {
    @apply my-2 leading-relaxed;
  }

  .article-content :where(a) {
    @apply text-warm-accent underline underline-offset-4 decoration-warm-accent/40;
  }

  .article-content :where(blockquote) {
    @apply not-italic border-l-2 border-warm-text/15 dark:border-night-text/15 pl-6 pr-4 py-4 my-10 bg-white/70 dark:bg-night-surface/70 text-warm-text/70 dark:text-night-text/70;
  }

  .article-content :where(p.lead) {
    @apply font-serif text-[1.12rem] md:text-[1.25rem] leading-[1.85] tracking-[0.01em] text-warm-text/90 dark:text-night-text/90;
    @apply bg-white/85 dark:bg-night-surface/70 border border-warm-text/10 dark:border-night-text/10;
    @apply rounded-2xl px-6 md:px-8 py-5 md:py-6 shadow-md mb-8 md:mb-10;
    @apply ring-1 ring-warm-text/5 dark:ring-night-text/10;
    @apply font-medium;
  }

  .article-toc {
    @apply fixed z-30;
    top: 50vh;
    left: max(1.5rem, calc((100vw - 56rem) / 2 + 56rem + 1.5rem));
    transform: translateY(-50%);
  }

  .article-toc-card {
    @apply rounded-xl border border-warm-text/10 dark:border-night-text/10 bg-white/75 dark:bg-night-surface/75 px-4 py-4 shadow-md backdrop-blur-md;
    width: 220px;
    box-shadow: 0 14px 36px rgba(0, 0, 0, 0.1);
    max-height: calc(100vh - 8rem);
    overflow: auto;
  }

  .article-toc-title {
    @apply text-[0.6rem] uppercase tracking-[0.32em] text-warm-text/45 dark:text-night-text/45 font-sans mb-3;
  }

  .article-toc-list {
    @apply flex flex-col gap-2 text-[0.86rem] text-warm-text/80 dark:text-night-text/80;
  }

  .article-toc-list a {
    @apply flex items-center gap-3 rounded-lg px-2.5 py-2 transition-all;
    @apply hover:bg-warm-text/5 dark:hover:bg-night-text/10 hover:text-warm-accent;
  }

  .article-toc-index {
    @apply text-[0.62rem] font-mono text-warm-text/40 dark:text-night-text/40;
  }

  .article-toc-text {
    @apply leading-snug;
  }

  .article-toc-sublist {
    @apply mt-1 ml-6 flex flex-col gap-1 border-l border-warm-text/10 dark:border-night-text/10 pl-3 text-[0.8rem] text-warm-text/60 dark:text-night-text/60;
  }

  .article-toc-sublist a {
    @apply rounded-md px-2 py-1 transition-colors hover:text-warm-accent hover:bg-warm-text/5 dark:hover:bg-night-text/10;
  }

  .article-toc-back {
    @apply mt-4 inline-flex items-center text-[0.6rem] uppercase tracking-[0.22em] text-warm-text/45 dark:text-night-text/45 transition-colors;
  }

  .article-toc-back:hover {
    @apply text-warm-accent;
  }

  .article-backtop {
    @apply fixed bottom-6 right-6 z-40 flex h-11 w-11 items-center justify-center rounded-full border border-warm-text/10 dark:border-night-text/10 bg-white/85 dark:bg-night-surface/85 text-warm-text/70 dark:text-night-text/70 shadow-md backdrop-blur-md transition-all;
  }

  .article-backtop:hover {
    @apply text-warm-accent shadow-lg;
  }

  @media (max-width: 900px) {
    .article-toc {
      position: static;
      right: auto;
      top: auto;
      left: auto;
      bottom: auto;
      transform: none;
      margin-bottom: 1.5rem;
    }

    .article-toc-card {
      width: auto;
      padding: 0.85rem 1rem;
      border-radius: 16px;
    }

    .article-toc-title {
      display: block;
    }

    .article-toc-list {
      flex-direction: column;
      gap: 0.25rem;
    }

    .article-toc-back {
      display: none;
    }

    .article-backtop {
      bottom: 1rem;
      right: 1rem;
      height: 40px;
      width: 40px;
    }
  }

  @media (min-width: 1024px) {
    .article-toc-card {
      width: 240px;
    }
  }
}
